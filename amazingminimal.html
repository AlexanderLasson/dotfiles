<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CACI • Pluto — Chat + CMS</title>
  <meta name="description" content="Pluto is CACI's modern CMS platform with an AI assistant. ChatGPT‑style landing page, HTMX prompt UI, Tailwind CSS, dark mode, and a stakeholder‑ready roadmap." />

  <!-- Tailwind (Play CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            caci: {
              red: '#D71920',
              black: '#0b0b0b',
              surface: '#111214'
            }
          },
          boxShadow: {
            soft: '0 10px 30px -10px rgba(0,0,0,0.25)'
          },
          fontFamily: {
            sans: ["Inter", "ui-sans-serif", "system-ui", "-apple-system", "Segoe UI", "Roboto", "Helvetica Neue", "Arial", "Noto Sans"]
          }
        }
      }
    }
  </script>

  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>

  <script>
    // Dark-mode persistence
    const themeKey = 'pluto-theme';
    function applyStoredTheme() {
      const stored = localStorage.getItem(themeKey);
      if (stored === 'dark' || (!stored && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    }
    function toggleTheme() {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem(themeKey, isDark ? 'dark' : 'light');
    }
    applyStoredTheme();
  </script>

  <style>
    .thin-scroll::-webkit-scrollbar{width:8px;height:8px}
    .thin-scroll::-webkit-scrollbar-thumb{background:#c2c2c2;border-radius:4px}
    .dark .thin-scroll::-webkit-scrollbar-thumb{background:#3a3a3a}
  </style>
</head>
<body class="bg-white text-gray-800 dark:bg-caci-surface dark:text-gray-100 font-sans antialiased">
  <!-- Top bar -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/70 dark:bg-caci-surface/70 border-b border-gray-200 dark:border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-7 w-7 rounded-lg bg-caci-red"></div>
        <div class="text-sm sm:text-base font-semibold tracking-tight">CACI • Pluto</div>
        <span class="hidden sm:inline text-xs text-gray-500 dark:text-gray-400">Chat + CMS Assistant</span>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#chat" class="hover:text-caci-red">Chat</a>
        <a href="#roadmap" class="hover:text-caci-red">Roadmap</a>
        <a href="#about" class="hover:text-caci-red">About</a>
      </nav>
      <div class="flex items-center gap-2">
        <button onclick="toggleTheme()" class="rounded-xl border border-gray-200 dark:border-white/10 px-3 py-1.5 text-xs hover:bg-gray-50 dark:hover:bg-white/5">Theme</button>
        <a href="#chat" class="hidden sm:inline rounded-xl bg-caci-red px-3 py-1.5 text-xs font-medium text-white shadow-soft">Open Chat</a>
      </div>
    </div>
  </header>

  <!-- ChatGPT-like Landing (hero + chat) -->
  <main id="chat" class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-10 lg:py-14">
    <!-- Headline -->
    <div class="text-center">
      <h1 class="text-3xl sm:text-5xl font-extrabold tracking-tight">
        Ask <span class="text-caci-red">Pluto</span> about your content and ops
      </h1>
      <p class="mt-3 text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        Natural‑language access to your CACI CMS data. Powered by Django, HTMX, and an OpenWebUI LLM backend.
      </p>
    </div>

    <!-- Suggestion chips -->
    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
      <button class="text-left rounded-xl border border-gray-200 dark:border-white/10 p-3 text-sm hover:bg-gray-50 dark:hover:bg-white/5" onclick="prefill('Summarize open Jira issues linked to fsef for this week.')">Summarize Jira for fsef</button>
      <button class="text-left rounded-xl border border-gray-200 dark:border-white/10 p-3 text-sm hover:bg-gray-50 dark:hover:bg-white/5" onclick="prefill('List the newest CMS entries tagged “flight-sim” and their owners.')">Newest CMS entries</button>
      <button class="text-left rounded-xl border border-gray-200 dark:border-white/10 p-3 text-sm hover:bg-gray-50 dark:hover:bg-white/5" onclick="prefill('Create a brief status update for the weekly report based on open items.')">Draft weekly status</button>
      <button class="text-left rounded-xl border border-gray-200 dark:border-white/10 p-3 text-sm hover:bg-gray-50 dark:hover:bg-white/5" onclick="prefill('Show metrics for imports and errors in the last 24 hours.')">Import metrics (24h)</button>
    </div>

    <!-- Chat shell -->
    <section class="mt-6 rounded-2xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/30 shadow-soft overflow-hidden">
      <!-- Messages viewport -->
      <div id="chat-viewport" class="thin-scroll h-[360px] overflow-y-auto p-4 sm:p-6 space-y-4" aria-live="polite">
        <!-- Welcome system message -->
        <div class="flex gap-3">
          <div class="h-8 w-8 rounded-full bg-caci-red shrink-0"></div>
          <div class="max-w-[85%] rounded-2xl rounded-tl-none bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/10 px-4 py-3 text-sm">
            Hi! I’m Pluto. Ask me about CMS content, Jira integration, or metrics. I’ll route your question through Django to OpenWebUI and return an answer with guardrails.
          </div>
        </div>
      </div>

      <!-- Composer (sticky inside card) -->
      <div class="border-t border-gray-200 dark:border-white/10 bg-white/80 dark:bg-black/30 backdrop-blur p-3 sm:p-4">
        <form id="composer" class="flex items-end gap-3"
              hx-post="/ai/prompt"
              hx-trigger="submit"
              hx-target="#chat-viewport"
              hx-swap="beforeend"
              hx-indicator="#thinking">
          <div class="flex-1">
            <label for="prompt" class="sr-only">Your prompt</label>
            <textarea id="prompt" name="prompt" rows="1" required
              class="w-full rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/30 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-caci-red/50 resize-none"
              placeholder="Ask Pluto…"></textarea>
            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Shift+Enter for newline • Enter to send</p>
          </div>
          <button type="submit" class="inline-flex items-center gap-2 rounded-xl bg-caci-red px-4 py-2.5 text-sm font-semibold text-white shadow-soft hover:opacity-95">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M2.01 21l20.99-9L2.01 3 2 10l15 2-15 2z"/></svg>
            Send
          </button>
        </form>
        <div id="thinking" class="htmx-indicator mt-2 text-xs text-gray-500 dark:text-gray-400">Thinking…</div>
      </div>
    </section>

    <script>
      // Helper to pre-fill prompt
      function prefill(text){
        const ta = document.getElementById('prompt');
        ta.value = text; autoResize(); ta.focus();
      }
      // Auto-grow composer
      const ta = document.getElementById('prompt');
      function autoResize(){ ta.style.height='auto'; ta.style.height=Math.min(160, ta.scrollHeight)+'px'; }
      ta.addEventListener('input', autoResize);
      // Keep viewport pinned to bottom on message append
      document.getElementById('composer').addEventListener('htmx:afterSwap', () => {
        const v = document.getElementById('chat-viewport');
        v.scrollTop = v.scrollHeight; autoResize();
      });
      // Enter to send
      ta.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); document.getElementById('composer').requestSubmit(); }});
    </script>
  </main>

  <!-- Roadmap (original structure with status + emojis) -->
  <section id="roadmap" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Product Roadmap</h2>
      <span class="text-xs text-gray-500 dark:text-gray-400">Status for funding review</span>
    </div>

    <div class="mt-6 grid lg:grid-cols-5 md:grid-cols-3 gap-6">
      <article class="rounded-2xl border border-gray-200 dark:border-white/10 p-5 bg-white dark:bg-black/30">
        <header class="flex items-center justify-between">
          <h3 class="font-semibold">Phase 0 — Prototype</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-caci-red/10 text-caci-red">Done</span>
        </header>
        <ul class="mt-3 space-y-2 text-sm">
          <li>✅ Django project, Unfold admin</li>
          <li>✅ DRF endpoints (Unity telemetry)</li>
          <li>✅ Postgres baseline schema</li>
        </ul>
      </article>

      <article class="rounded-2xl border border-gray-200 dark:border-white/10 p-5 bg-white dark:bg-black/30">
        <header class="flex items-center justify-between">
          <h3 class="font-semibold">Phase 1 — Data Ingest</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-caci-red/10 text-caci-red">In Progress</span>
        </header>
        <ul class="mt-3 space-y-2 text-sm">
          <li>◻ CSV import + validation</li>
          <li>◻ Jira integration (create/link issues)</li>
          <li>◻ Role-based access (RBAC)</li>
        </ul>
      </article>

      <article class="rounded-2xl border border-gray-200 dark:border-white/10 p-5 bg-white dark:bg-black/30">
        <header class="flex items-center justify-between">
          <h3 class="font-semibold">Phase 2 — AI Assistant</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-200">Planned</span>
        </header>
        <ul class="mt-3 space-y-2 text-sm">
          <li>◻ HTMX prompt → Django proxy</li>
          <li>◻ OpenWebUI (self-hosted) connector</li>
          <li>◻ Guardrails, audit logs</li>
        </ul>
      </article>

      <article class="rounded-2xl border border-gray-200 dark:border-white/10 p-5 bg-white dark:bg-black/30">
        <header class="flex items-center justify-between">
          <h3 class="font-semibold">Phase 3 — Integrations</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-200">Planned</span>
        </header>
        <ul class="mt-3 space-y-2 text-sm">
          <li>◻ GitLab CI/CD webhooks</li>
          <li>◻ SSO (SAML/OIDC)</li>
          <li>◻ Observability (OpenTelemetry)</li>
        </ul>
      </article>

      <article class="rounded-2xl border border-gray-200 dark:border-white/10 p-5 bg-white dark:bg-black/30">
        <header class="flex items-center justify-between">
          <h3 class="font-semibold">Phase 4 — Enterprise</h3>
          <span class="text-xs px-2 py-1 rounded-lg bg-gray-100 text-gray-700 dark:bg-white/10 dark:text-gray-200">Planned</span>
        </header>
        <ul class="mt-3 space-y-2 text-sm">
          <li>◻ Fine-grained permissions</li>
          <li>◻ Backups & retention policies</li>
          <li>◻ SLA & on-call playbooks</li>
        </ul>
      </article>
    </div>

    <div class="mt-8 rounded-2xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/30 p-5">
      <div class="text-sm text-gray-600 dark:text-gray-300">Q4 2025 Target</div>
      <div class="mt-3 w-full bg-gray-200/60 dark:bg-white/10 rounded-full h-2">
        <div class="h-2 rounded-full bg-caci-red" style="width: 28%"></div>
      </div>
      <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">Progress estimate toward MVP.</p>
    </div>
  </section>

  <!-- About / CTA -->
  <section id="about" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12">
    <div class="rounded-2xl border border-gray-200 dark:border-white/10 bg-white dark:bg-black/30 p-6 flex flex-col md:flex-row items-center justify-between gap-4">
      <div>
        <h3 class="font-semibold">Ready to pilot Pluto?</h3>
        <p class="text-sm text-gray-600 dark:text-gray-300 mt-1">Deploy on internal network with Postgres + OpenWebUI.
        </p>
      </div>
      <a href="#chat" class="inline-flex items-center rounded-xl bg-caci-red px-4 py-2.5 text-sm font-semibold text-white shadow-soft hover:opacity-95">Open Chat</a>
    </div>
  </section>

  <footer class="border-t border-gray-200 dark:border-white/10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
      <div>© <span id="year"></span> CACI • Pluto</div>
      <div>Built with Django, HTMX, Tailwind</div>
    </div>
  </footer>

  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
